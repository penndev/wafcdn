import{s as z}from"./wafcdn-13a6d1bd.js";import{i as N}from"./index-d8696fb1.js";import{f as h,d as O,b as F}from"./index-d3db0b60.js";import{_ as P,r as V,m as A,f as c,o as _,c as E,g as l,w as o,h as g,a,t as s,j as u,F as H,p as L,k as R}from"./index-24c808f8.js";import"./request-7e928fa4.js";const n=p=>(L("data-v-064706df"),p=p(),R(),p),T={class:"card-panel"},U=n(()=>a("br",null,null,-1)),j={class:"text"},X=n(()=>a("br",null,null,-1)),Y={class:"card-panel"},$=n(()=>a("br",null,null,-1)),q={class:"percentage-value"},G=n(()=>a("br",null,null,-1)),J=n(()=>a("br",null,null,-1)),K={class:"percentage-label"},Q={class:"text"},W=n(()=>a("br",null,null,-1)),Z={class:"card-panel"},ee=n(()=>a("br",null,null,-1)),te={class:"percentage-value"},ae=n(()=>a("br",null,null,-1)),le=n(()=>a("br",null,null,-1)),oe={class:"percentage-label"},se={class:"text"},ne=n(()=>a("br",null,null,-1)),ce={__name:"stat",setup(p){const e=V({cpu:{percent:0,count:0},memory:{progress:0,used:"",total:""},disk:{progress:0,used:"",total:""},conf:{time:"",version:""},file:{today:0,total:0},flushDelay:15});let f=null;const m=[],k=[],b=[],S=V(null),B={title:{text:"网络IO"},xAxis:{type:"category",data:m},yAxis:{type:"value",axisLabel:{formatter:(t,d)=>F(t)}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},valueFormatter:t=>F(t)},series:[{name:"接收",data:b,type:"line",areaStyle:{}},{name:"发送",data:k,type:"line",areaStyle:{}}]};A(()=>{f=N(S.value),f.hideLoading(),window.onresize=function(){f.resize()}});const D=()=>{z().then(t=>{e.value.cpu.percent=Math.round(t.cpu.percent),e.value.cpu.count=t.cpu.count,e.value.memory.progress=Math.round(t.memory.used/t.memory.total*100),e.value.memory.used=h(t.memory.used),e.value.memory.total=h(t.memory.total),e.value.disk.progress=Math.round(t.disk.used/t.disk.total*100),e.value.disk.used=h(t.disk.used),e.value.disk.total=h(t.disk.total),e.value.conf.time=O("Y-m-d H:i:s",t.conf.time),e.value.conf.version=t.conf.version,e.value.file.today=t.file.today,e.value.file.total=t.file.total;const d=new Date;m.push(d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()),k.push(t.traffic.send),b.push(t.traffic.recv),m.length>30&&(m.shift(),b.shift(),k.shift()),f.setOption(B)}),setTimeout(D,e.value.flushDelay*1e3)};return D(),(t,d)=>{const v=c("el-option"),I=c("el-select"),x=c("el-progress"),r=c("el-col"),w=c("el-row"),y=c("el-link"),M=c("el-tooltip"),C=c("el-card");return _(),E(H,null,[l(I,{modelValue:e.value.flushDelay,"onUpdate:modelValue":d[0]||(d[0]=i=>e.value.flushDelay=i)},{default:o(()=>[(_(),g(v,{key:5,label:"服务器状态刷新间隔: 5秒",value:5})),(_(),g(v,{key:15,label:"服务器状态刷新间隔: 15秒",value:15})),(_(),g(v,{key:30,label:"服务器状态刷新间隔: 30秒",value:30})),(_(),g(v,{key:60,label:"服务器状态刷新间隔: 60秒",value:60}))]),_:1},8,["modelValue"]),l(w,{gutter:40,class:"panel-group"},{default:o(()=>[l(r,{xs:24,sm:8},{default:o(()=>[a("div",T,[U,l(x,{type:"circle",percentage:e.value.cpu.percent},null,8,["percentage"]),a("div",j," CPU / "+s(e.value.cpu.count),1),X])]),_:1}),l(r,{xs:24,sm:8},{default:o(()=>[a("div",Y,[$,l(x,{type:"circle",percentage:e.value.memory.progress},{default:o(({percentage:i})=>[a("span",q,s(i)+"%",1),G,J,a("span",K,s(e.value.memory.used),1)]),_:1},8,["percentage"]),a("div",Q," 内存 / "+s(e.value.memory.total),1),W])]),_:1}),l(r,{xs:24,sm:8},{default:o(()=>[a("div",Z,[ee,l(x,{type:"circle",percentage:e.value.disk.progress},{default:o(({percentage:i})=>[a("span",te,s(i)+"%",1),ae,le,a("span",oe,s(e.value.disk.used),1)]),_:1},8,["percentage"]),a("div",se," 硬盘 / "+s(e.value.disk.total),1),ne])]),_:1})]),_:1}),l(w,{gutter:12,class:"notifyCard"},{default:o(()=>[l(r,{span:12},{default:o(()=>[l(C,{shadow:"always"},{default:o(()=>[u(" 配置版本: "),l(y,{type:"info"},{default:o(()=>[u(s(e.value.conf.time),1)]),_:1}),u("  -  "),l(M,{content:e.value.conf.version},{default:o(()=>[l(y,{type:"primary"},{default:o(()=>[u(s(e.value.conf.version.substring(0,12)),1)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),l(r,{span:12},{default:o(()=>[l(C,{shadow:"always"},{default:o(()=>[u(" 缓存文件: 今日 "),l(y,{type:"success"},{default:o(()=>[u(s(e.value.file.today),1)]),_:1}),u(" / 总计 "),l(y,{type:"primary"},{default:o(()=>[u(s(e.value.file.total),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(w,null,{default:o(()=>[l(r,{span:24},{default:o(()=>[a("div",{ref_key:"netChart",ref:S,class:"netChart"},null,512)]),_:1})]),_:1})],64)}}},pe=P(ce,[["__scopeId","data-v-064706df"]]);export{pe as default};
