import{b as z,k as E,l as $,m as F}from"./archive-2885de3d.js";import{r as v,f as i,o as N,c as M,a as _,g as e,w as t,F as P,j as m,t as j,E as c,v as I}from"./index-271749e0.js";import"./request-7a9563c7.js";const L=_("br",null,null,-1),Q={class:"dialog-footer"},O={__name:"tag",setup(G){const u=v({total:0,query:{limit:20,page:1,order:null,name:null},data:[]}),y=n=>{u.value.query.name=null,u.value.query.order=null,s()},h=n=>{u.value.query.page=n,s()},w=n=>{u.value.query.limit=n,s()},V=({column:n,prop:a,order:f})=>{let r="";f==="descending"?r="-":f==="ascending"&&(r="+"),u.value.query.order=r+a,s()},s=()=>{z(u.value.query).then(n=>{u.value.data=n.data,u.value.total=n.total})},g=v(null),l=v({visible:!1,title:"dialog",form:{},formRule:{email:[{required:!0,message:"邮箱",trigger:"blur"},{min:5,message:"用户名最少为5个字符",trigger:"blur"}]},formAction:"add"}),k=()=>{l.value.title="创建数据",l.value.visible=!0,l.value.formAction="add",l.value.form={}},C=n=>{l.value.title="创建数据",l.value.visible=!0,l.value.formAction="edit",l.value.form=n},x=()=>{g.value.validate(n=>{n?l.value.formAction==="add"?E(l.value.form).then(a=>{l.value.visible=!1,c.info(a),s()}):l.value.formAction==="edit"?($(l.value.form).then(a=>{l.value.visible=!1,c.info(a),s()}),l.value.visible=!1):c.info("提交错误"):c.error("请输入正确的数据！")})},q=n=>{I.confirm(`请仔细确认是否删除数据[${n}]?`,"警告",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{F({id:n}).then(a=>{c.warning(a),s()})})};return s(),(n,a)=>{const f=i("el-input"),r=i("el-form-item"),p=i("el-button"),b=i("el-form"),d=i("el-table-column"),A=i("el-link"),T=i("el-table"),D=i("el-pagination"),B=i("el-main"),R=i("el-switch"),S=i("el-dialog");return N(),M(P,null,[_("div",null,[e(b,{inline:!0},{default:t(()=>[e(r,{label:"名称"},{default:t(()=>[e(f,{modelValue:u.value.query.name,"onUpdate:modelValue":a[0]||(a[0]=o=>u.value.query.name=o),placeholder:"名称",clearable:""},null,8,["modelValue"])]),_:1}),e(r,null,{default:t(()=>[e(p,{type:"primary",icon:"search",onClick:s},{default:t(()=>[m(" 查询 ")]),_:1}),e(p,{type:"info",icon:"Refresh",onClick:y},{default:t(()=>[m(" 重置 ")]),_:1})]),_:1})]),_:1})]),e(B,{style:{"background-color":"#fff"}},{default:t(()=>[e(p,{type:"primary",icon:"Plus",onClick:k},{default:t(()=>[m(" 新增 ")]),_:1}),e(T,{data:u.value.data,style:{width:"100%"},onSortChange:V},{default:t(()=>[e(d,{prop:"id",label:"ID",width:"80",sortable:"custom"}),e(d,{prop:"name",label:"名称",width:"160"}),e(d,{prop:"status",label:"状态",width:"160"},{default:t(o=>[e(A,{type:o.row.status>0?"success":"danger"},{default:t(()=>[m(j(o.row.status>0?o.row.status>1?o.row.status:"开启":"关闭"),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"hits",label:"热度",width:"160"}),e(d,{prop:"content",label:"描述",width:"160"}),e(d,{prop:"updatedAt",label:"最近更新",width:"200"}),e(d,{prop:"createdAt",label:"创建日期",width:"200"}),e(d,{fixed:"right",label:"操作",width:"105"},{default:t(o=>[e(p,{link:"",type:"primary",onClick:U=>C(o.row)},{default:t(()=>[m(" 编辑 ")]),_:2},1032,["onClick"]),e(p,{link:"",type:"danger",onClick:U=>q(o.row.id)},{default:t(()=>[m(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),L,e(D,{background:"",layout:"total, sizes, prev, pager, next",total:u.value.total,"page-size":u.value.query.limit,onCurrentChange:h,onSizeChange:w},null,8,["total","page-size"])]),_:1}),e(S,{modelValue:l.value.visible,"onUpdate:modelValue":a[6]||(a[6]=o=>l.value.visible=o),title:l.value.title,"close-on-click-modal":!1,"destroy-on-close":"","close-on-press-escape":"",center:""},{footer:t(()=>[_("span",Q,[e(p,{onClick:a[5]||(a[5]=o=>l.value.visible=!1)},{default:t(()=>[m("取消")]),_:1}),e(p,{type:"primary",onClick:x},{default:t(()=>[m("确定")]),_:1})])]),default:t(()=>[e(b,{ref_key:"dialogRef",ref:g,"label-position":"left",model:l.value.form,rules:l.value.formRule},{default:t(()=>[e(r,{label:"名称",prop:"name"},{default:t(()=>[e(f,{modelValue:l.value.form.name,"onUpdate:modelValue":a[1]||(a[1]=o=>l.value.form.name=o)},null,8,["modelValue"])]),_:1}),e(r,{label:"状态"},{default:t(()=>[e(R,{modelValue:l.value.form.status,"onUpdate:modelValue":a[2]||(a[2]=o=>l.value.form.status=o),size:"large","active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),e(r,{label:"热度",prop:"hits"},{default:t(()=>[e(f,{modelValue:l.value.form.hits,"onUpdate:modelValue":a[3]||(a[3]=o=>l.value.form.hits=o)},null,8,["modelValue"])]),_:1}),e(r,{label:"描述",prop:"content"},{default:t(()=>[e(f,{modelValue:l.value.form.content,"onUpdate:modelValue":a[4]||(a[4]=o=>l.value.form.content=o),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64)}}};export{O as default};
