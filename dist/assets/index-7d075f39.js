import{s as b}from"./request-7e928fa4.js";import{r as _,f as s,o as y,c as I,a as g,g as e,w as a,F as M,j as d,h as x,q as S,t as P,E as v,v as j}from"./index-24c808f8.js";const L=m=>b({url:"/example/admin",method:"get",params:m}),Q=m=>b({url:"/example/admin",method:"post",data:m}),G=m=>b({url:"/example/admin",method:"put",data:m}),H=m=>b({url:"/example/admin",method:"delete",params:m}),J={target:"_blank"},K=g("br",null,null,-1),O={class:"dialog-footer"},Y={__name:"index",setup(m){const o=_({total:0,query:{limit:20,page:1,order:null,name:null},data:[]}),w=n=>{o.value.query.name=null,o.value.query.order=null,u()},V=n=>{o.value.query.page=n,u()},q=n=>{o.value.query.limit=n,u()},E=({column:n,prop:t,order:p})=>{let c="";p==="descending"?c="-":p==="ascending"&&(c="+"),o.value.query.order=c+t,u()},u=()=>{L(o.value.query).then(n=>{o.value.data=n.data,o.value.total=n.total})},h=_(),z=()=>{o.value.data.forEach(n=>{h.value.toggleRowSelection(n)})},l=_({visible:!1,title:"dialog",form:{},formRule:{email:[{required:!0,message:"邮箱",trigger:"blur"},{min:5,message:"用户名最少为5个字符",trigger:"blur"}]},formAction:"add"}),A=()=>{l.value.title="创建数据",l.value.visible=!0,l.value.formAction="add",l.value.form={}},R=n=>{l.value.title="编辑数据",l.value.visible=!0,l.value.formAction="edit",l.value.form=n},k=_(null),B=()=>{k.value.validate(n=>{n?l.value.formAction==="add"?Q(l.value.form).then(t=>{l.value.visible=!1,v.info(t),u()}):l.value.formAction==="edit"?(G(l.value.form).then(t=>{l.value.visible=!1,v.info(t),u()}),l.value.visible=!1):v.error("提交错误"):v.error("请输入正确的数据！")})},D=n=>{j.confirm(`请仔细确认是否删除数据[${n}]?`,"警告",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{H({id:n}).then(t=>{v.warning(t),u()})})};return u(),(n,t)=>{const p=s("el-input"),c=s("el-form-item"),r=s("el-button"),C=s("el-form"),f=s("el-table-column"),$=s("el-table"),N=s("el-pagination"),T=s("el-main"),F=s("el-dialog");return y(),I(M,null,[g("div",null,[e(C,{inline:!0},{default:a(()=>[e(c,{label:"名称"},{default:a(()=>[e(p,{modelValue:o.value.query.name,"onUpdate:modelValue":t[0]||(t[0]=i=>o.value.query.name=i),placeholder:"名称",clearable:""},null,8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(r,{type:"primary",icon:"search",onClick:u},{default:a(()=>[d(" 查询 ")]),_:1}),e(r,{type:"info",icon:"Refresh",onClick:w},{default:a(()=>[d(" 重置 ")]),_:1})]),_:1})]),_:1})]),e(T,{style:{"background-color":"#fff"}},{default:a(()=>[e(r,{type:"primary",size:"small",icon:o.value.selectStat?"SemiSelect":"Select",onClick:t[1]||(t[1]=i=>o.value.selectStat=!o.value.selectStat)},null,8,["icon"]),o.value.selectStat?(y(),x(r,{key:0,size:"small",onClick:z},{default:a(()=>[d(" 反选 ")]),_:1})):S("",!0),o.value.selectStat?(y(),x(r,{key:1,size:"small",onClick:t[2]||(t[2]=i=>h.value.clearSelection())},{default:a(()=>[d(" 清空 ")]),_:1})):S("",!0),e(r,{type:"primary",icon:"Plus",size:"small",onClick:A},{default:a(()=>[d(" 新增 ")]),_:1}),e($,{data:o.value.data,onSortChange:E},{default:a(()=>[e(f,{label:"ID",prop:"id",width:"80",sortable:"custom"}),e(f,{label:"名称",prop:"nickname",width:"160",align:"center"}),e(f,{label:"邮箱",width:"240"},{default:a(i=>[g("a",J,P(i.row.email),1)]),_:1}),e(f,{prop:"updatedAt",label:"最近更新",width:"200"}),e(f,{prop:"createdAt",label:"创建日期",width:"200"}),e(f,{fixed:"right",label:"操作",width:"105"},{default:a(i=>[e(r,{link:"",type:"primary",onClick:U=>R(i.row)},{default:a(()=>[d(" 编辑 ")]),_:2},1032,["onClick"]),e(r,{link:"",type:"danger",onClick:U=>D(i.row.id)},{default:a(()=>[d(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),K,e(N,{background:"",layout:"total, sizes, prev, pager, next",total:o.value.total,"page-size":o.value.query.limit,onCurrentChange:V,onSizeChange:q},null,8,["total","page-size"])]),_:1}),e(F,{modelValue:l.value.visible,"onUpdate:modelValue":t[5]||(t[5]=i=>l.value.visible=i),title:l.value.title,"close-on-click-modal":!1,"destroy-on-close":"","close-on-press-escape":"",center:""},{footer:a(()=>[g("span",O,[e(r,{onClick:t[4]||(t[4]=i=>l.value.visible=!1)},{default:a(()=>[d("取消")]),_:1}),e(r,{type:"primary",onClick:B},{default:a(()=>[d("确定")]),_:1})])]),default:a(()=>[e(C,{ref_key:"dialogRef",ref:k,"label-position":"left",model:l.value.form,rules:l.value.formRule},{default:a(()=>[e(c,{label:"邮箱",prop:"email"},{default:a(()=>[e(p,{modelValue:l.value.form.email,"onUpdate:modelValue":t[3]||(t[3]=i=>l.value.form.email=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64)}}};export{Y as default};
