import{s as B}from"./request-7a9563c7.js";import{i as z}from"./index-e0333ef0.js";import{f as y,d as L}from"./index-932def3d.js";import{_ as N,r as F,m as O,f as u,o as f,c as A,g as a,w as l,F as E,h as g,a as t,t as n,j as r,p as H,k as P}from"./index-271749e0.js";const R=d=>B({url:"/stat",method:"get",params:d,viewLoading:!1});const c=d=>(H("data-v-1917c39b"),d=d(),P(),d),T={class:"card-panel"},U=c(()=>t("br",null,null,-1)),j={class:"text"},G=c(()=>t("br",null,null,-1)),K={class:"card-panel"},X=c(()=>t("br",null,null,-1)),Y={class:"percentage-value"},$=c(()=>t("br",null,null,-1)),q=c(()=>t("br",null,null,-1)),J={class:"percentage-label"},Q={class:"text"},W=c(()=>t("br",null,null,-1)),Z={class:"card-panel"},ee=c(()=>t("br",null,null,-1)),te={class:"percentage-value"},ae=c(()=>t("br",null,null,-1)),se=c(()=>t("br",null,null,-1)),le={class:"percentage-label"},oe={class:"text"},ne=c(()=>t("br",null,null,-1)),ce={__name:"stat",setup(d){const e=F({cpu:{percent:0,count:0},memory:{progress:0,used:"",total:""},disk:{progress:0,used:"",total:""},conf:{time:"",version:""},file:{today:0,total:0},flushDelay:15});let m=null;const v=[],b=[],x=[],S=F(null),M={title:{text:"网络IO"},xAxis:{type:"category",data:v},yAxis:{type:"value",axisLabel:{formatter:function(s,i){const o=s*8;return o>1e9?(o/1e9).toFixed(2)+"Gbps":o>1e6?(o/1e6).toFixed(1)+"Mbps":o>1e3?(o/1e3).toFixed(1)+"Kbps":o+"bps"}}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},series:[{name:"接收",data:x,type:"line",areaStyle:{}},{name:"发送",data:b,type:"line",areaStyle:{}}]};O(()=>{m=z(S.value),m.hideLoading(),window.onresize=function(){m.resize()}});const D=()=>{R().then(s=>{e.value.cpu.percent=Math.round(s.cpu.percent),e.value.cpu.count=s.cpu.count,e.value.memory.progress=Math.round(s.memory.used/s.memory.total*100),e.value.memory.used=y(s.memory.used),e.value.memory.total=y(s.memory.total),e.value.disk.progress=Math.round(s.disk.used/s.disk.total*100),e.value.disk.used=y(s.disk.used),e.value.disk.total=y(s.disk.total),e.value.conf.time=L("Y-m-d H:i:s",s.conf.time),e.value.conf.version=s.conf.version,e.value.file.today=s.file.today,e.value.file.total=s.file.total;const i=new Date;v.push(i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()),b.push(s.traffic.send),x.push(s.traffic.recv),v.length>30&&(v.shift(),x.shift(),b.shift()),m.setOption(M)}),setTimeout(D,e.value.flushDelay*1e3)};return D(),(s,i)=>{const o=u("el-option"),V=u("el-select"),k=u("el-progress"),_=u("el-col"),w=u("el-row"),h=u("el-link"),I=u("el-tooltip"),C=u("el-card");return f(),A(E,null,[a(V,{modelValue:e.value.flushDelay,"onUpdate:modelValue":i[0]||(i[0]=p=>e.value.flushDelay=p)},{default:l(()=>[(f(),g(o,{key:5,label:"服务器状态刷新间隔: 5秒",value:5})),(f(),g(o,{key:15,label:"服务器状态刷新间隔: 15秒",value:15})),(f(),g(o,{key:30,label:"服务器状态刷新间隔: 30秒",value:30})),(f(),g(o,{key:60,label:"服务器状态刷新间隔: 60秒",value:60}))]),_:1},8,["modelValue"]),a(w,{gutter:40,class:"panel-group"},{default:l(()=>[a(_,{xs:24,sm:8},{default:l(()=>[t("div",T,[U,a(k,{type:"circle",percentage:e.value.cpu.percent},null,8,["percentage"]),t("div",j," CPU / "+n(e.value.cpu.count),1),G])]),_:1}),a(_,{xs:24,sm:8},{default:l(()=>[t("div",K,[X,a(k,{type:"circle",percentage:e.value.memory.progress},{default:l(({percentage:p})=>[t("span",Y,n(p)+"%",1),$,q,t("span",J,n(e.value.memory.used),1)]),_:1},8,["percentage"]),t("div",Q," 内存 / "+n(e.value.memory.total),1),W])]),_:1}),a(_,{xs:24,sm:8},{default:l(()=>[t("div",Z,[ee,a(k,{type:"circle",percentage:e.value.disk.progress},{default:l(({percentage:p})=>[t("span",te,n(p)+"%",1),ae,se,t("span",le,n(e.value.disk.used),1)]),_:1},8,["percentage"]),t("div",oe," 硬盘 / "+n(e.value.disk.total),1),ne])]),_:1})]),_:1}),a(w,{gutter:12,class:"notifyCard"},{default:l(()=>[a(_,{span:12},{default:l(()=>[a(C,{shadow:"always"},{default:l(()=>[r(" 配置版本: "),a(h,{type:"info"},{default:l(()=>[r(n(e.value.conf.time),1)]),_:1}),r("  -  "),a(I,{content:e.value.conf.version},{default:l(()=>[a(h,{type:"primary"},{default:l(()=>[r(n(e.value.conf.version.substring(0,12)),1)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),a(_,{span:12},{default:l(()=>[a(C,{shadow:"always"},{default:l(()=>[r(" 缓存文件: 今日 "),a(h,{type:"success"},{default:l(()=>[r(n(e.value.file.today),1)]),_:1}),r(" / 总计 "),a(h,{type:"primary"},{default:l(()=>[r(n(e.value.file.total),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(w,null,{default:l(()=>[a(_,{span:24},{default:l(()=>[t("div",{ref_key:"netChart",ref:S,class:"netChart"},null,512)]),_:1})]),_:1})],64)}}},_e=N(ce,[["__scopeId","data-v-1917c39b"]]);export{_e as default};
