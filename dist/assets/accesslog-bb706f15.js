import{s as q}from"./request-7e928fa4.js";import{r as k,f as o,o as S,c as V,a as c,g as e,w as n,F as x,j as _,t as D}from"./index-24c808f8.js";const z=p=>q({url:"/system/admin/accesslog",method:"get",params:p}),A=c("br",null,null,-1),N={__name:"accesslog",setup(p){const a=k({total:0,query:{limit:20,page:1,order:"-id",admin:null},data:[]}),h=()=>{a.value.query.admin=null,r()},f=t=>{a.value.query.page=t,r()},g=t=>{a.value.query.limit=t,r()},b=({column:t,prop:s,order:u})=>{let i="";u==="descending"?i="-":u==="ascending"&&(i="+"),a.value.query.order=i+s,r()},r=()=>{z(a.value.query).then(t=>{a.value.data=t.data,a.value.total=t.total})};return r(),(t,s)=>{const u=o("el-input"),i=o("el-form-item"),m=o("el-button"),y=o("el-form"),l=o("el-table-column"),v=o("el-table"),w=o("el-pagination"),C=o("el-main");return S(),V(x,null,[c("div",null,[e(y,{inline:!0},{default:n(()=>[e(i,{label:"管理员"},{default:n(()=>[e(u,{modelValue:a.value.query.admin,"onUpdate:modelValue":s[0]||(s[0]=d=>a.value.query.admin=d),placeholder:"管理员ID",clearable:""},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(m,{type:"primary",icon:"search",onClick:r},{default:n(()=>[_(" 查询 ")]),_:1}),e(m,{type:"info",icon:"Refresh",onClick:h},{default:n(()=>[_(" 重置 ")]),_:1})]),_:1})]),_:1})]),e(C,{style:{"background-color":"#fff"}},{default:n(()=>[e(v,{data:a.value.data,style:{width:"100%"},onSortChange:b},{default:n(()=>[e(l,{prop:"id",label:"ID",width:"80",sortable:"custom"}),e(l,{prop:"AdminUser.nickname",label:"管理员",width:"80"}),e(l,{prop:"AdminUser.id",label:"管理ID",width:"80"}),e(l,{prop:"ip",label:"来源IP地址",width:"120"}),e(l,{prop:"path",label:"请求地址"}),e(l,{prop:"method",label:"请求方法",width:"100"}),e(l,{prop:"payload",label:"请求参数","align-header":"center"},{default:n(d=>[c("pre",null,D(d.row.payload),1)]),_:1}),e(l,{prop:"status",label:"状态码",width:"100"}),e(l,{prop:"createdAt",label:"创建日期",width:"200"})]),_:1},8,["data"]),A,e(w,{background:"",layout:"total, sizes, prev, pager, next",total:a.value.total,"default-page-size":a.value.query.limit,onCurrentChange:f,onSizeChange:g},null,8,["total","default-page-size"])]),_:1})],64)}}};export{N as default};
